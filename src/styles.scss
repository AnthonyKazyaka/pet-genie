// =============================================================================
// Pet Genie - Global Styles
// =============================================================================

// Angular Material imports
@import '@angular/material/prebuilt-themes/indigo-pink.css';

// =============================================================================
// SCSS Variables
// =============================================================================

// -----------------------------------------------------------------------------
// Color System Documentation
// -----------------------------------------------------------------------------
// This application uses a Material Design 3 inspired color system with proper
// theming support for both light and dark modes.
//
// Color Naming Convention:
// - Base colors: Primary color names (e.g., $primary, $secondary)
// - Container colors: Used for backgrounds (e.g., $primary-container)
// - On-colors: Text/icon colors for corresponding backgrounds (e.g., $on-primary)
// - Surface colors: Different elevation levels for surfaces
// - Outline colors: Border and divider colors
//
// Theme Support:
// - All colors are mapped to CSS custom properties (--variable-name)
// - Dark mode is implemented via [data-theme="dark"] attribute
// - Light mode uses softer colors with high contrast text
// - Dark mode uses brighter accent colors with adapted contrast
//
// Contrast Guidelines:
// - Always use on-* variables for text on colored backgrounds
// - Workload indicators have dedicated on-workload-* variables
// - Surface variants provide different emphasis levels
// -----------------------------------------------------------------------------

// Primary colors - Indigo
$primary: #4F46E5;
$primary-container: #E0E7FF;
$on-primary: #FFFFFF;
$on-primary-container: #312E81;

// Secondary colors - Teal
$secondary: #0D9488;
$secondary-container: #CCFBF1;
$on-secondary: #FFFFFF;
$on-secondary-container: #134E4A;

// Tertiary colors - Green (for success states)
$tertiary: #10B981;
$tertiary-container: #D1FAE5;
$on-tertiary: #FFFFFF;
$on-tertiary-container: #065F46;

// Error colors
$error: #EF4444;
$error-container: #FEE2E2;
$on-error: #FFFFFF;
$on-error-container: #7F1D1D;

// Light mode surface colors
$surface-light: #FAFAFA;
$surface-container-light: #F5F5F5;
$surface-container-low-light: #FAFAFA;
$surface-container-high-light: #EEEEEE;
$surface-container-highest-light: #E5E5E5;
$surface-container-lowest-light: #FFFFFF;
$on-surface-light: #1F2937;
$on-surface-variant-light: #6B7280;
$outline-light: #D1D5DB;
$outline-variant-light: #E5E7EB;

// Dark mode surface colors
$surface-dark: #111827;
$surface-container-dark: #1F2937;
$surface-container-low-dark: #1a202c;
$surface-container-high-dark: #374151;
$surface-container-highest-dark: #4B5563;
$surface-container-lowest-dark: #0D1117;
$on-surface-dark: #F3F4F6;
$on-surface-variant-dark: #D1D5DB;
$outline-dark: #4B5563;
$outline-variant-dark: #374151;

// Workload level colors
$workload-comfortable: #10B981;
$workload-busy: #F59E0B;
$workload-high: #F97316;
$workload-burnout: #EF4444;

// Shadows
$shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
$shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
$shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);

// Animation durations
$transition-fast: 150ms;
$transition-normal: 250ms;
$transition-slow: 350ms;

// Breakpoints
$breakpoint-sm: 640px;
$breakpoint-md: 768px;
$breakpoint-lg: 1024px;
$breakpoint-xl: 1280px;

// Border radius
$radius-sm: 4px;
$radius-md: 8px;
$radius-lg: 12px;
$radius-xl: 16px;
$radius-full: 9999px;

// =============================================================================
// SCSS Mixins
// =============================================================================

@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

@mixin flex-between {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

@mixin flex-column {
  display: flex;
  flex-direction: column;
}

@mixin card-base {
  background: var(--surface-container-lowest);
  border-radius: $radius-lg;
  border: 1px solid var(--outline-variant);
  box-shadow: $shadow-sm;
}

@mixin card-hover {
  transition: all $transition-normal ease;
  
  &:hover {
    border-color: var(--primary);
    box-shadow: $shadow-md;
    transform: translateY(-2px);
  }
}

@mixin text-truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

@mixin focus-ring {
  &:focus-visible {
    outline: none;
    box-shadow: var(--focus-ring);
  }
}

@mixin skeleton-animation {
  background: linear-gradient(
    90deg,
    var(--surface-container) 0px,
    var(--surface-container-high) 40px,
    var(--surface-container) 80px
  );
  background-size: 200px 100%;
  animation: skeleton-loading 1.5s ease-in-out infinite;
}

// Responsive mixins
@mixin mobile {
  @media (max-width: #{$breakpoint-md - 1px}) {
    @content;
  }
}

@mixin tablet {
  @media (min-width: $breakpoint-md) and (max-width: #{$breakpoint-lg - 1px}) {
    @content;
  }
}

@mixin desktop {
  @media (min-width: $breakpoint-lg) {
    @content;
  }
}

@mixin mobile-and-tablet {
  @media (max-width: #{$breakpoint-lg - 1px}) {
    @content;
  }
}

// =============================================================================
// CSS Custom Properties (for runtime theming)
// =============================================================================

:root {
  // Primary colors
  --primary: #{$primary};
  --primary-container: #{$primary-container};
  --on-primary: #{$on-primary};
  --on-primary-container: #{$on-primary-container};

  // Secondary colors
  --secondary: #{$secondary};
  --secondary-container: #{$secondary-container};
  --on-secondary: #{$on-secondary};
  --on-secondary-container: #{$on-secondary-container};

  // Tertiary colors
  --tertiary: #{$tertiary};
  --tertiary-container: #{$tertiary-container};
  --on-tertiary: #{$on-tertiary};
  --on-tertiary-container: #{$on-tertiary-container};

  // Error colors
  --error: #{$error};
  --error-container: #{$error-container};
  --on-error: #{$on-error};
  --on-error-container: #{$on-error-container};

  // Surface colors
  --surface: #{$surface-light};
  --surface-container: #{$surface-container-light};
  --surface-container-low: #{$surface-container-low-light};
  --surface-container-high: #{$surface-container-high-light};
  --surface-container-highest: #{$surface-container-highest-light};
  --surface-container-lowest: #{$surface-container-lowest-light};
  --on-surface: #{$on-surface-light};
  --on-surface-variant: #{$on-surface-variant-light};

  // Outline
  --outline: #{$outline-light};
  --outline-variant: #{$outline-variant-light};

  // Workload level colors
  --workload-comfortable: #{$workload-comfortable};
  --workload-busy: #{$workload-busy};
  --workload-high: #{$workload-high};
  --workload-burnout: #{$workload-burnout};
  
  // Workload on-colors (text colors for accessibility)
  --on-workload-comfortable: #FFFFFF;
  --on-workload-busy: #000000;
  --on-workload-high: #FFFFFF;
  --on-workload-burnout: #FFFFFF;

  // Shadows
  --shadow-sm: #{$shadow-sm};
  --shadow-md: #{$shadow-md};
  --shadow-lg: #{$shadow-lg};

  // Animation durations
  --transition-fast: #{$transition-fast};
  --transition-normal: #{$transition-normal};
  --transition-slow: #{$transition-slow};

  // Focus ring
  --focus-ring: 0 0 0 3px rgba(79, 70, 229, 0.4);
}

// Dark mode theme
[data-theme="dark"] {
  // Primary colors (adjusted for dark)
  --primary: #818CF8;
  --primary-container: #4338CA;
  --on-primary: #000000;
  --on-primary-container: #{$primary-container};

  // Secondary colors
  --secondary: #5EEAD4;
  --secondary-container: #0F766E;
  --on-secondary: #000000;
  --on-secondary-container: #{$secondary-container};

  // Tertiary colors
  --tertiary: #34D399;
  --tertiary-container: #047857;
  --on-tertiary: #000000;
  --on-tertiary-container: #{$tertiary-container};

  // Error colors
  --error: #F87171;
  --error-container: #7F1D1D;
  --on-error: #450A0A;
  --on-error-container: #{$error-container};

  // Surface colors
  --surface: #{$surface-dark};
  --surface-container: #{$surface-container-dark};
  --surface-container-low: #{$surface-container-low-dark};
  --surface-container-high: #{$surface-container-high-dark};
  --surface-container-highest: #{$surface-container-highest-dark};
  --surface-container-lowest: #{$surface-container-lowest-dark};
  --on-surface: #{$on-surface-dark};
  --on-surface-variant: #{$on-surface-variant-dark};

  // Outline
  --outline: #{$outline-dark};
  --outline-variant: #{$outline-variant-dark};

  // Workload colors adjusted for dark mode (brighter for visibility)
  --workload-comfortable: #34D399;
  --workload-busy: #FCD34D;
  --workload-high: #FB923C;
  --workload-burnout: #F87171;
  
  // Workload on-colors for dark mode
  --on-workload-comfortable: #000000;
  --on-workload-busy: #000000;
  --on-workload-high: #000000;
  --on-workload-burnout: #000000;

  // Focus ring for dark mode
  --focus-ring: 0 0 0 3px rgba(129, 140, 248, 0.4);
}

// =============================================================================
// Base Styles
// =============================================================================

*,
*::before,
*::after {
  box-sizing: border-box;
}

html,
body {
  margin: 0;
  padding: 0;
  height: 100%;
  width: 100%;
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
  font-size: 14px;
  line-height: 1.5;
  color: var(--on-surface);
  background: var(--surface);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

// =============================================================================
// Material Overrides
// =============================================================================

// Toolbar
.mat-toolbar.mat-primary {
  background: var(--primary);
  color: var(--on-primary);

  .mat-mdc-icon-button {
    --mdc-icon-button-icon-color: var(--on-primary);
    color: var(--on-primary);
  }

  mat-icon {
    color: var(--on-primary);
  }
}

// Buttons
.mat-mdc-raised-button.mat-primary {
  --mdc-protected-button-container-color: var(--primary);
  --mdc-protected-button-label-text-color: var(--on-primary);
}

.mat-mdc-unelevated-button.mat-primary {
  --mdc-filled-button-container-color: var(--primary);
  --mdc-filled-button-label-text-color: var(--on-primary);
}

.mat-mdc-button,
.mat-mdc-outlined-button,
.mat-mdc-stroked-button {
  --mdc-text-button-label-text-color: var(--primary);
  --mdc-outlined-button-label-text-color: var(--on-surface);
  --mdc-outlined-button-outline-color: var(--outline);

  &:hover {
    --mdc-text-button-label-text-color: var(--primary);
    --mdc-outlined-button-label-text-color: var(--on-surface);
  }

  &.mat-primary {
    --mdc-text-button-label-text-color: var(--primary);
  }

  &.mat-warn {
    --mdc-text-button-label-text-color: var(--error);
    --mdc-outlined-button-label-text-color: var(--error);
    --mdc-outlined-button-outline-color: var(--error);
  }
}

.mat-mdc-raised-button.mat-warn,
.mat-mdc-unelevated-button.mat-warn {
  --mdc-protected-button-container-color: var(--error);
  --mdc-protected-button-label-text-color: var(--on-error);
  --mdc-filled-button-container-color: var(--error);
  --mdc-filled-button-label-text-color: var(--on-error);
}

.mat-mdc-icon-button {
  --mdc-icon-button-icon-color: var(--on-surface-variant);
  color: var(--on-surface-variant);
}

// Cards
.mat-mdc-card {
  --mdc-elevated-card-container-color: var(--surface-container-lowest);
  border-radius: $radius-lg !important;
  box-shadow: $shadow-sm !important;
  border: 1px solid var(--outline-variant);
  color: var(--on-surface);

  &:hover {
    box-shadow: $shadow-md !important;
  }
}

// Sidenav
.mat-drawer {
  background: var(--surface-container-lowest);
  color: var(--on-surface);
}

// Form fields
.mat-mdc-form-field {
  --mdc-outlined-text-field-outline-color: var(--outline);
  --mdc-outlined-text-field-focus-outline-color: var(--primary);
  --mdc-outlined-text-field-label-text-color: var(--on-surface-variant);
  --mdc-outlined-text-field-input-text-color: var(--on-surface);
}

// Slider
.mat-mdc-slider {
  --mdc-slider-handle-color: var(--primary);
  --mdc-slider-focus-handle-color: var(--primary);
  --mdc-slider-hover-handle-color: var(--primary);
  --mdc-slider-active-track-color: var(--primary);
  --mdc-slider-inactive-track-color: var(--primary-container);
  --mdc-slider-with-tick-marks-active-container-color: var(--on-primary);
  --mdc-slider-with-tick-marks-inactive-container-color: var(--on-primary-container);
}

// List and navigation
.mat-mdc-list-item,
.mat-mdc-list-option,
.mat-mdc-nav-list .mat-mdc-list-item {
  color: var(--on-surface);
}

.mat-mdc-list-item-icon,
.mat-icon {
  color: var(--on-surface-variant);
}

// Select and dropdown
.mat-mdc-select {
  color: var(--on-surface);
  --mdc-filled-text-field-label-text-color: var(--on-surface-variant);
}

// Progress indicators
.mat-mdc-progress-bar {
  --mdc-linear-progress-active-indicator-color: var(--primary);
  --mdc-linear-progress-track-color: var(--primary-container);
}

.mat-mdc-progress-spinner {
  --mdc-circular-progress-active-indicator-color: var(--primary);
}

// Divider
.mat-divider {
  border-top-color: var(--outline-variant);
}

// Expansion panel
.mat-expansion-panel {
  background: var(--surface-container-lowest);
  color: var(--on-surface);

  .mat-expansion-panel-header {
    color: var(--on-surface);
  }

  .mat-expansion-panel-header-title,
  .mat-expansion-panel-header-description {
    color: inherit;
  }
}

// Dialog
.mat-mdc-dialog-container {
  --mdc-dialog-container-color: var(--surface-container-low);
  --mdc-dialog-subhead-color: var(--on-surface);
  --mdc-dialog-supporting-text-color: var(--on-surface-variant);
}

.mat-mdc-dialog-title {
  color: var(--on-surface);
}

.mat-mdc-dialog-content {
  color: var(--on-surface);
}

// Tooltip
.mat-mdc-tooltip {
  --mdc-plain-tooltip-container-color: var(--surface-container-high);
  --mdc-plain-tooltip-supporting-text-color: var(--on-surface);
}

// Checkbox
.mat-mdc-checkbox {
  --mdc-checkbox-selected-checkmark-color: var(--on-primary);
  --mdc-checkbox-selected-focus-icon-color: var(--primary);
  --mdc-checkbox-selected-hover-icon-color: var(--primary);
  --mdc-checkbox-selected-icon-color: var(--primary);
  --mdc-checkbox-selected-pressed-icon-color: var(--primary);
  --mdc-checkbox-unselected-focus-icon-color: var(--on-surface-variant);
  --mdc-checkbox-unselected-hover-icon-color: var(--on-surface);
  --mdc-checkbox-unselected-icon-color: var(--on-surface-variant);
}

// Snackbar
.mat-mdc-snack-bar-container {
  --mdc-snackbar-container-color: var(--surface-container-high);
  --mdc-snackbar-supporting-text-color: var(--on-surface);
}

// Tabs
.mat-mdc-tab {
  --mdc-tab-indicator-active-indicator-color: var(--primary);
  --mat-tab-header-active-label-text-color: var(--primary);
  --mat-tab-header-inactive-label-text-color: var(--on-surface-variant);
  --mat-tab-header-active-focus-label-text-color: var(--primary);
  --mat-tab-header-inactive-focus-label-text-color: var(--on-surface);
  --mat-tab-header-active-hover-label-text-color: var(--primary);
  --mat-tab-header-inactive-hover-label-text-color: var(--on-surface);

  .mdc-tab__text-label {
    color: var(--on-surface-variant);
  }

  &.mdc-tab--active .mdc-tab__text-label {
    color: var(--primary);
  }

  .mdc-tab__icon {
    color: var(--on-surface-variant);
  }

  &.mdc-tab--active .mdc-tab__icon {
    color: var(--primary);
  }
}

.mat-mdc-tab-header {
  --mat-tab-header-divider-color: var(--outline-variant);
}

.mat-mdc-tab-group {
  --mat-tab-header-label-text-size: 14px;
  --mat-tab-header-label-text-weight: 500;
}

// =============================================================================
// Dark Mode Overrides
// =============================================================================

[data-theme="dark"] {
  .mat-mdc-card {
    --mdc-elevated-card-container-color: var(--surface-container);
    border-color: var(--outline-variant);
    color: var(--on-surface);
  }

  .mat-mdc-card-title,
  .mat-mdc-card-subtitle,
  .mat-mdc-card-content {
    color: var(--on-surface);
  }

  .mat-mdc-card-subtitle {
    color: var(--on-surface-variant) !important;
  }

  .mat-drawer {
    background: var(--surface-container);
    color: var(--on-surface);
  }

  .mat-drawer-content {
    background: var(--surface);
    color: var(--on-surface);
  }

  .mat-toolbar.mat-primary {
    background: var(--surface-container);
    color: var(--on-surface);
  }

  .mat-mdc-list-item,
  .mat-mdc-list-option,
  .mat-mdc-nav-list .mat-mdc-list-item {
    color: var(--on-surface);
  }

  .mat-mdc-icon-button {
    color: var(--on-surface);
  }

  .mat-icon {
    color: inherit;
  }

  .mat-mdc-button,
  .mat-mdc-outlined-button,
  .mat-mdc-stroked-button {
    --mdc-outlined-button-label-text-color: var(--on-surface);

    &.mat-warn {
      --mdc-text-button-label-text-color: var(--error);
      --mdc-outlined-button-label-text-color: var(--error);
      --mdc-outlined-button-outline-color: var(--error);
    }
  }

  .mat-mdc-dialog-container {
    --mdc-dialog-container-color: var(--surface-container);
  }

  .mat-mdc-form-field {
    --mdc-outlined-text-field-label-text-color: var(--on-surface-variant);
    --mdc-outlined-text-field-input-text-color: var(--on-surface);
    --mdc-outlined-text-field-disabled-input-text-color: var(--on-surface-variant);
  }

  .mat-mdc-select {
    color: var(--on-surface);
  }

  .mat-mdc-chip {
    --mdc-chip-label-text-color: var(--on-surface);
  }

  .mat-mdc-tab {
    --mat-tab-header-inactive-label-text-color: var(--on-surface-variant);
    --mat-tab-header-inactive-focus-label-text-color: var(--on-surface);
    --mat-tab-header-inactive-hover-label-text-color: var(--on-surface);

    .mdc-tab__text-label {
      color: var(--on-surface-variant);
    }

    &.mdc-tab--active .mdc-tab__text-label {
      color: var(--primary);
    }

    .mdc-tab__icon {
      color: var(--on-surface-variant);
    }

    &.mdc-tab--active .mdc-tab__icon {
      color: var(--primary);
    }
  }

  .mat-mdc-progress-bar {
    --mdc-linear-progress-active-indicator-color: var(--primary);
    --mdc-linear-progress-track-color: var(--surface-container-high);
  }

  h1, h2, h3, h4, h5, h6 {
    color: var(--on-surface);
  }

  p, span, div {
    color: inherit;
  }
}

// =============================================================================
// Workload Indicator Classes
// =============================================================================

.workload-comfortable {
  color: var(--workload-comfortable) !important;
}

.workload-busy {
  color: var(--workload-busy) !important;
}

.workload-high {
  color: var(--workload-high) !important;
}

.workload-burnout {
  color: var(--workload-burnout) !important;
}

.workload-bg-comfortable {
  background-color: var(--workload-comfortable) !important;
  color: var(--on-workload-comfortable) !important;
}

.workload-bg-busy {
  background-color: var(--workload-busy) !important;
  color: var(--on-workload-busy) !important;
}

.workload-bg-high {
  background-color: var(--workload-high) !important;
  color: var(--on-workload-high) !important;
}

.workload-bg-burnout {
  background-color: var(--workload-burnout) !important;
  color: var(--on-workload-burnout) !important;
}

// =============================================================================
// Utility Classes
// =============================================================================

.text-center {
  text-align: center;
}

.text-right {
  text-align: right;
}

.font-medium {
  font-weight: 500;
}

.font-semibold {
  font-weight: 600;
}

.text-muted {
  color: var(--on-surface-variant);
}

// =============================================================================
// Scrollbar Styles
// =============================================================================

::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--surface-container);
}

::-webkit-scrollbar-thumb {
  background: var(--outline);
  border-radius: $radius-sm;

  &:hover {
    background: var(--on-surface-variant);
  }
}

// =============================================================================
// Accessibility
// =============================================================================

// Skip link
.skip-link {
  position: absolute;
  top: -40px;
  left: 0;
  background: var(--primary);
  color: var(--on-primary);
  padding: 8px 16px;
  z-index: 10000;
  text-decoration: none;
  font-weight: 500;
  border-radius: 0 0 $radius-md 0;
  transition: top $transition-fast ease;

  &:focus {
    top: 0;
  }
}

// Focus visible styles
*:focus-visible {
  outline: none;
  box-shadow: var(--focus-ring);
}

button:focus-visible,
a:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible {
  outline: none;
  box-shadow: var(--focus-ring);
}

// =============================================================================
// Link Styles
// =============================================================================

a {
  color: var(--primary);
  text-decoration: underline;
  text-decoration-color: var(--primary);
  text-decoration-thickness: 1px;
  text-underline-offset: 2px;
  transition: color $transition-fast ease, text-decoration-color $transition-fast ease;

  &:hover {
    color: var(--primary-container);
    text-decoration-color: var(--primary-container);
  }

  &:visited {
    color: var(--primary);
  }
}

[data-theme="dark"] a {
  color: var(--primary);
  text-decoration-color: var(--primary);

  &:hover {
    color: var(--primary-container);
    text-decoration-color: var(--primary-container);
  }

  &:visited {
    color: var(--primary);
  }
}

// Links in Material hints and form fields
.mat-mdc-form-field mat-hint a,
.mat-hint a {
  color: var(--primary);
  text-decoration: underline;
  font-weight: 500;
}

// =============================================================================
// Animations
// =============================================================================

@keyframes skeleton-loading {
  0% {
    background-position: -200px 0;
  }
  100% {
    background-position: calc(200px + 100%) 0;
  }
}

.skeleton {
  @include skeleton-animation;
  border-radius: $radius-sm;
}

.skeleton-text {
  height: 1em;
  margin-bottom: 0.5em;

  &:last-child {
    width: 80%;
  }
}

.skeleton-circle {
  border-radius: $radius-full;
}

.skeleton-card {
  height: 120px;
  border-radius: $radius-lg;
}

// =============================================================================
// Print Styles
// =============================================================================

@media print {
  .no-print {
    display: none !important;
  }
}

// =============================================================================
// Reduced Motion
// =============================================================================

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
